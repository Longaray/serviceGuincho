<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui">
<f:view locale="#{userSettingsMB.language}">
<h:head>
<title>#{msg['label.nome-sistema']}</title>
</h:head>
<h:body>
	<h:outputStylesheet name="default.css" library="css" />
	<p:ajaxStatus onstart="statusDialog.show();" onsuccess="statusDialog.hide();"/>  
	<p:dialog modal="true" widgetVar="statusDialog" header="Processando, aguarde" draggable="false" closable="true">  
    	<p:graphicImage value="/resources/image/ajaxloadingbar.gif" />  
	</p:dialog>
    <p:layout fullPage="true" gutter="0">
        <p:layoutUnit position="north" size="50" spacing="0" resizable="false" closable="false" gutter="0">
			<div id="logo" style="display: inline-block; width: 180px; text-align: center;">
				<p:graphicImage value="/resources/image/logo.gif" title="#{msg['label.nome-sistema']}" />
			</div>
			<div id="user" style="display: inline-block; vertical-align: bottom;">
	        	<h:panelGrid columns="2" styleClass="ui-widget" rendered="#{sessionMB.logged}">
		            <p:outputLabel value="#{msg['label.usuario']}: " />
		            <p:outputLabel value="#{sessionMB.user.nome} - #{sessionMB.user.properties['setor']}" />
	        	</h:panelGrid>
	        </div>
			<div id="icons" style="display: inline-block; vertical-align: bottom;">
        		<h:form rendered="#{sessionMB.logged}">
        			<p:commandButton value="Logout" action="#{logonMB.logoff}" ajax="false" styleClass="ui-widget" />
        		</h:form>
        	</div>
        </p:layoutUnit>  
        <p:layoutUnit position="west" size="180" gutter="0"  rendered="#{sessionMB.logged}">
        	<h:form>
        		<!-- <o:cache> Buga pagina de erro -->
					<p:menu>
						<ui:include src="menu.xhtml" />
					</p:menu>
				<!--  </o:cache> -->
			</h:form>
        </p:layoutUnit>  
        <p:layoutUnit position="center" gutter="0">
        	<ui:insert name="body" />
        </p:layoutUnit>  
    </p:layout>  
</h:body>
</f:view>
</html>